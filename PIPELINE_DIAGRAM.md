# CI/CD Pipeline Visual Diagram

## Pipeline Flow Diagram

```
┌─────────────────────────────────────────────────────────────┐
│                   GitHub Repository                         │
│          (Push/Pull Request Triggers Pipeline)               │
└─────────────────────┬───────────────────────────────────────┘
                      │
                      ▼
        ┌─────────────────────────────┐
        │   GitHub Actions Workflow   │
        │    (.github/workflows/ci.yml)│
        └─────────────────────────────┘
                      │
        ┌─────────────┴─────────────┐
        │                           │
        ▼                           ▼
┌──────────────┐           ┌──────────────┐
│  Backend     │           │  Frontend    │
│   Test       │           │   Build      │
│   Job        │           │    Job       │
└──────────────┘           └──────────────┘
        │                           │
        │   ┌──────────────────┐   │
        │   │  Parallel        │   │
        │   │  Execution       │   │
        │   └──────────────────┘   │
        │                           │
        └───────────┬───────────────┘
                    │
                    │ Both must succeed
                    ▼
            ┌──────────────┐
            │    Docker    │
            │   Build &    │
            │    Test      │
            │    Job       │
            └──────────────┘
                    │
                    ▼
            ┌──────────────┐
            │   Pipeline   │
            │   Summary    │
            │   (always)   │
            └──────────────┘
```

## Detailed Job Breakdown

### Job 1: Backend Test & Lint
```
┌──────────────────────────────────────────────┐
│  Backend Test & Lint                         │
├──────────────────────────────────────────────┤
│ 1. Checkout Code                             │
│ 2. Setup Python 3.11                         │
│ 3. Install Dependencies                      │
│ 4. Run PyTest (with coverage)                │
│ 5. Upload Coverage to Codecov                │
│ 6. Lint Code (flake8)                        │
└──────────────────────────────────────────────┘
```

### Job 2: Frontend Build
```
┌──────────────────────────────────────────────┐
│  Frontend Build                              │
├──────────────────────────────────────────────┤
│ 1. Checkout Code                             │
│ 2. Setup Node.js 18                          │
│ 3. Install Dependencies                      │
│    (remove package-lock.json for platform)   │
│ 4. Build React App (npm run build)           │
│ 5. Verify Build Output                       │
└──────────────────────────────────────────────┘
```

### Job 3: Docker Build & Test
```
┌──────────────────────────────────────────────┐
│  Docker Build & Test                         │
│  (Depends on: Backend + Frontend)            │
├──────────────────────────────────────────────┤
│ 1. Checkout Code                             │
│ 2. Setup Docker Buildx                       │
│ 3. Build Multi-Stage Docker Image            │
│    ┌─────────────────────────────┐           │
│    │ Stage 1: Frontend Builder   │           │
│    │ - node:18-alpine            │           │
│    │ - Build React app           │           │
│    └─────────────────────────────┘           │
│              │                                │
│              ▼                                │
│    ┌─────────────────────────────┐           │
│    │ Stage 2: Production Server  │           │
│    │ - python:3.11-slim          │           │
│    │ - Copy built frontend       │           │
│    │ - Copy backend              │           │
│    └─────────────────────────────┘           │
│ 4. Test Docker Image                         │
│    - Run container                            │
│    - Health check                             │
│    - Cleanup                                  │
└──────────────────────────────────────────────┘
```

### Job 4: Pipeline Summary
```
┌──────────────────────────────────────────────┐
│  Pipeline Summary                            │
│  (Always runs, even on failure)              │
├──────────────────────────────────────────────┤
│ - Display status of all jobs                 │
│ - Success/Failure indicators                 │
│ - Useful for debugging                       │
└──────────────────────────────────────────────┘
```

## Pipeline Timeline

```
Time: 0:00 ────────────────────────────────> ~5:00

┌──────────────────────────────────────────────────────────────┐
│  0:00  ┌──────────┐  ┌──────────┐                          │
│        │ Backend  │  │ Frontend │                          │
│  2:00  │  Test    │  │  Build   │  ← Parallel Execution    │
│        │          │  │          │                          │
│        └──────────┘  └──────────┘                          │
│                                                              │
│  2:00                              ┌──────────────┐         │
│                                    │    Docker    │         │
│  4:00                              │    Build     │         │
│                                    └──────────────┘         │
│                                                              │
│  4:30                      ┌──────────────┐                 │
│                            │   Summary    │                 │
│  5:00                      └──────────────┘                 │
└──────────────────────────────────────────────────────────────┘

Sequential: ~8 minutes
Parallel:   ~5 minutes
```

## Decision Points

```
┌──────────────────────────────────────────────────────────────┐
│ Pipeline Execution Flow                                       │
├──────────────────────────────────────────────────────────────┤
│                                                               │
│  Code Push/PR                                                 │
│      │                                                        │
│      ▼                                                        │
│  ┌─────────────────┐                                         │
│  │ Backend Test    │───┐                                     │
│  │ Frontend Build  │───┤                                     │
│  └─────────────────┘   │                                     │
│                        │                                     │
│                        ▼                                     │
│                 ┌──────────┐                                 │
│                 │ Both OK? │                                 │
│                 └──────────┘                                 │
│                        │                                     │
│              ┌─────────┴─────────┐                          │
│              │                   │                           │
│              YES                 NO                          │
│              │                   │                           │
│              ▼                   ▼                           │
│      ┌──────────────┐    ┌──────────────┐                   │
│      │ Docker Build │    │ Stop Pipeline│                   │
│      └──────────────┘    └──────────────┘                   │
│              │                                               │
│              ▼                                               │
│      ┌──────────────┐                                       │
│      │  All Tests   │                                       │
│      │  Pass?       │                                       │
│      └──────────────┘                                       │
│              │                                               │
│              ▼                                               │
│      ┌──────────────┐                                       │
│      │ Pipeline     │                                       │
│      │ Summary      │                                       │
│      └──────────────┘                                       │
│                                                               │
└──────────────────────────────────────────────────────────────┘
```

## Architecture Diagram

```
┌─────────────────────────────────────────────────────────────┐
│                      Application Stack                       │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌──────────────────┐         ┌──────────────────┐         │
│  │   React          │         │   Flask          │         │
│  │   Frontend       │────────▶│   Backend        │         │
│  │   (Vite)         │  HTTP   │   (REST API)     │         │
│  └──────────────────┘         └────────┬─────────┘         │
│                                        │                    │
│                                        ▼                    │
│                               ┌──────────────────┐          │
│                               │   SQLite         │          │
│                               │   Database       │          │
│                               └──────────────────┘          │
│                                                              │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│                      Deployment Stack                        │
├─────────────────────────────────────────────────────────────┤
│                                                              │
│  ┌──────────────────────────────────────────────────────┐  │
│  │            Docker Container                          │  │
│  │  ┌────────────────┐         ┌────────────────┐     │  │
│  │  │  React Static  │         │  Flask Server  │     │  │
│  │  │  Files (dist/) │         │  (Port 5000)   │     │  │
│  │  └────────────────┘         └────────────────┘     │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                              │
└─────────────────────────────────────────────────────────────┘
```